@model JantaTechForRetailShop.VIewModels.AllClassViewModel
@{
    ViewBag.Title = "GenerateBill";
}

@using (Html.BeginForm("GenerateBill", "Products"))
{
    <div class="form-horizontal">

        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            @*@Html.LabelFor(model => model.BarCodeId, htmlAttributes: new { @class = "control-label col-md-2" })*@
            <div class="col-md-10">
                @Html.TextBoxFor(model => model.TempProduct.BarCodeId, new { autocomplete = "off", autofocus = "autofocus", required = "''", htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.TempProduct.BarCodeId, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-10">
                <input type="submit" value="Add" class="btn btn-default" />
            </div>
        </div>
    </div>

    <div class="jumbotron" style="margin-top: 5px; margin-bottom:15px">
        <table class="table table-responsive table-hover table-striped">
            <tr>
                <th>Brand</th>
                <th>Category</th>
                <th>Colour</th>
                <th>Price</th>
                <th>Qty</th>
                <th>Size</th>
                <th></th>
            </tr>
            @{
                int totSum = 0;

                foreach (var item in Model.TempProducts)
                {
                    <tr>
                        <td>@item.Brand</td>
                        <td>@item.Category</td>
                        <td>@item.Colour</td>
                        <td>
                            @{
                                int sum = 0;
                                for (int i = 0; i < item.QtyPurchased; i++)
                                {
                                    sum = sum + item.Price;
                                }
                            }@sum
                        </td>
                        <td>
                            @Html.ActionLink("-", "RemItem", new { id = item.Id }, new { @class = "btn btn-succes" })
                            @item.QtyPurchased
                            @Html.ActionLink("+", "AddItem", new { id = item.Id }, new { @class = "btn btn-succes" })
                        </td>
                        <td>@item.Size</td>
                        <td>@Html.ActionLink("Remove", "RemoveTemp", new { id = item.Id }, new { @class = "btn btn-danger", onclick = "return confirm('Are you sure');" })</td>
                    </tr>

                                    totSum = totSum + sum;
                                    ViewBag.Value = totSum;
                                }
            }
        </table>
        <p>Total=@totSum</p>
    </div>

}
@Html.ActionLink("Confirm","ConfirmBill",null,new { @class = "btn btn-success"})
@if (ViewBag.Message != null)
{
    <script type="text/javascript">
            window.onload = function() {
                alert("@ViewBag.Message");
        };
    </script>
}
